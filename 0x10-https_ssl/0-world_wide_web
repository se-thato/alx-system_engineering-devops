#!/usr/bin/env bash
# Script: 0-world_wide_web
# Description: Displays DNS info for given domain and subdomains

# Function to get DNS info
get_subdomain_info() {
  local domain="$1"
  local sub="$2"
  local full="${sub}.${domain}"
  local result=$(dig "$full" +short)

  if [[ -n "$result" ]]; then
    local type=$(dig "$full" | awk '/IN/ && $4 == "A" { print $4; exit }')
    echo "The subdomain ${sub} is a ${type} record and points to ${result}"
  else
    echo "No record found for subdomain ${sub}"
  fi
}

# Main logic
domain="$1"
subdomain="$2"

# Check if domain is provided
if [[ -z "$domain" ]]; then
  echo "Usage: $0 <domain> [subdomain]"
  exit 1
fi

# If only domain is provided
if [[ -z "$subdomain" ]]; then
  for sub in www lb-01 web-01 web-02; do
    get_subdomain_info "$domain" "$sub"
  done
else
  get_subdomain_info "$domain" "$subdomain"
fi
